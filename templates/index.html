<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mec√¢nica G√∂elzer - Sistema de Gest√£o</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/splash.css">
    <link rel="stylesheet" href="/static/print.css" media="print">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Tela de Inicializa√ß√£o -->
    <script>
        // Define a URL base da API para que os scripts JS possam us√°-la
        const API_BASE_URL = window.location.origin; 
    </script>
    <script src="/static/splash.js"></script>
    <!-- Conte√∫do Principal do Sistema -->
    <div id="app" class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Logo e Nome da Empresa -->
            <div class="logo-container">
                <img src="/static/logo.png" alt="Mec√¢nica G√∂elzer" class="logo">
                <h2>Mec√¢nica G√∂elzer</h2>
            </div>
            
            <nav class="nav">
                <div class="nav-item active" onclick="showPage(\'dashboard\', event)">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="showPage(\'clientes\', event)">
                    <span class="icon">üë•</span>
                    <span>Clientes</span>
                </div>
                <div class="nav-item" onclick="showPage(\'veiculos\', event)">
                    <span class="icon">üöó</span>
                    <span>Ve√≠culos</span>
                </div>
                <div class="nav-item" onclick="showPage(\'servicos\', event)">
                    <span class="icon">üîß</span>
                    <span>Servi√ßos</span>
                </div>
                <div class="nav-item" onclick="showPage(\'pecas\', event)">
                    <span class="icon">üì¶</span>
                    <span>Pe√ßas</span>
                </div>
                <div class="nav-item" onclick="showPage(\'ferramentas\', event)">
                    <span class="icon">üõ†Ô∏è</span>
                    <span>Ferramentas</span>
                </div>
                <div class="nav-item" onclick="showPage(\'agendamentos\', event)">
                    <span class="icon">üìÖ</span>
                    <span>Agendamentos</span>
                </div>
                <div class="nav-item" onclick="showPage(\'ordens\', event)">
                    <span class="icon">üìã</span>
                    <span>Ordens de Servi√ßo</span>
                </div>
                <div class="nav-item" onclick="showPage(\'despesas\', event)">
                    <span class="icon">üí∏</span>
                    <span>Despesas Gerais</span>
                </div>
                <div class="nav-item" onclick="showPage(\'compras\', event)">
                    <span class="icon">üõí</span>
                    <span>Compras</span>
                </div>
                <div class="nav-item" onclick="showPage(\'financeiro\', event)">
                    <span class="icon">üí∞</span>
                    <span>Financeiro</span>
                </div>
                <div class="nav-item" onclick="showPage(\'relatorios\', event)">
                    <span class="icon">üìà</span>
                    <span>Relat√≥rios</span>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard -->
            <div id="dashboard" class="page">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <div>
                        <button class="btn btn-secondary" onclick="exportarBackupCompleto()">üì• Backup Completo</button>
                        <button class="btn btn-secondary" onclick="importarBackup()">üì§ Importar Backup</button>
                        <button class="btn btn-info" onclick="mostrarStatusBackup()">üîí Status Seguran√ßa</button>
                        <button class="btn btn-warning" onclick="restaurarVersaoAnterior()">‚èÆÔ∏è Restaurar Vers√£o</button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-info">
                            <div class="stat-label">Total de Clientes</div>
                            <div class="stat-value" id="totalClientes">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üöó</div>
                        <div class="stat-info">
                            <div class="stat-label">Total de Ve√≠culos</div>
                            <div class="stat-value" id="totalVeiculos">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-info">
                            <div class="stat-label">OS Abertas</div>
                            <div class="stat-value" id="ordensAbertas">0</div>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <div class="stat-label">Receita do M√™s</div>
                            <div class="stat-value" id="receitaMensal">R$ 0</div>
                        </div>
                    </div>
                    <div class="stat-card danger">
                        <div class="stat-icon">üìâ</div>
                        <div class="stat-info">
                            <div class="stat-label">Despesas do M√™s</div>
                            <div class="stat-value" id="despesaMensal">R$ 0</div>
                        </div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <div class="stat-label">Lucro do M√™s</div>
                            <div class="stat-value" id="lucroMensal">R$ 0</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Ordens de Servi√ßo Recentes</h3>
                    <div id="ordensRecentes"></div>
                </div>

                <div class="card">
                    <h3>‚ö†Ô∏è Alertas de Estoque</h3>
                    <div id="alertasEstoque"></div>
                </div>

                <div class="card" id="graficoCard">
                    <h3>üìà Receitas vs Despesas (√öltimos 6 meses)</h3>
                    <canvas id="graficoFinanceiro" style="max-height: 300px;"></canvas>
                </div>
            </div>

            <!-- Clientes -->
            <div id="clientes" class="page hidden">
                <div class="page-header">
                    <h1>Clientes</h1>
                    <button class="btn btn-primary" onclick="openModal(\'clienteModal\')">+ Novo Cliente</button>
                </div>
                
                <div class="card">
                    <div class="table-controls">
                        <input type="text" class="search-box" placeholder="üîç Buscar cliente..." onkeyup="filtrarTabela(\'clientesTable\', this.value)">
                    </div>
                    <div class="table-responsive">
                        <table id="clientesTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>CPF/CNPJ</th>
                                    <th>Telefone</th>
                                    <th>Email</th>
                                    <th>Ve√≠culos</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="clientesBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ve√≠culos -->
            <div id="veiculos" class="page hidden">
                <div class="page-header">
                    <h1>Ve√≠culos</h1>
                    <button class="btn btn-primary" onclick="openModal(\'veiculoModal\')">+ Novo Ve√≠culo</button>
                </div>
                
                <div class="card">
                    <div class="table-controls">
                        <input type="text" class="search-box" placeholder="üîç Buscar ve√≠culo..." onkeyup="filtrarTabela(\'veiculosTable\', this.value)">
                    </div>
                    <div class="table-responsive">
                        <table id="veiculosTable">
                            <thead>
                                <tr>
                                    <th>Placa</th>
                                    <th>Marca</th>
                                    <th>Modelo</th>
                                    <th>Ano</th>
                                    <th>Cliente</th>
                                    <th>KM</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="veiculosBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Servi√ßos -->
            <div id="servicos" class="page hidden">
                <div class="page-header">
                    <h1>Cat√°logo de Servi√ßos</h1>
                    <button class="btn btn-primary" onclick="openModal(\'servicoModal\')">+ Novo Servi√ßo</button>
                </div>
                
                <div class="card">
                    <div class="table-responsive">
                        <table id="servicosTable">
                            <thead>
                                <tr>
                                    <th>Descri√ß√£o</th>
                                    <th>Categoria</th>
                                    <th>Valor M√£o de Obra</th>
                                    <th>Tempo Estimado</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="servicosBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Pe√ßas -->
            <div id="pecas" class="page hidden">
                <div class="page-header">
                    <h1>Cat√°logo de Pe√ßas</h1>
                    <button class="btn btn-primary" onclick="openModal(\'pecaModal\')">+ Nova Pe√ßa</button>
                </div>
                
                <div class="card">
                    <div class="table-responsive">
                        <table id="pecasTable">
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Fornecedor</th>
                                    <th>Pre√ßo Venda</th>
                                    <th>Estoque</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="pecasBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ferramentas -->
            <div id="ferramentas" class="page hidden">
                <div class="page-header">
                    <h1>Ferramentas</h1>
                    <button class="btn btn-primary" onclick="openModal(\'ferramentaModal\')">+ Nova Ferramenta</button>
                </div>
                
                <div class="card">
                    <div class="table-responsive">
                        <table id="ferramentasTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Status</th>
                                    <th>Localiza√ß√£o</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="ferramentasBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Agendamentos -->
            <div id="agendamentos" class="page hidden">
                <div class="page-header">
                    <h1>Agendamentos</h1>
                    <button class="btn btn-primary" onclick="openModal(\'agendamentoModal\')">+ Novo Agendamento</button>
                </div>
                
                <div class="card">
                    <div class="table-responsive">
                        <table id="agendamentosTable">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Hora</th>
                                    <th>Cliente</th>
                                    <th>Ve√≠culo</th>
                                    <th>Servi√ßo</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="agendamentosBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ordens de Servi√ßo -->
            <div id="ordens" class="page hidden">
                <div class="page-header">
                    <h1>Ordens de Servi√ßo</h1>
                    <button class="btn btn-primary" onclick="openModal(\'ordemModal\')">+ Nova OS</button>
                </div>
                
                <div class="card">
                    <div class="table-controls">
                        <input type="text" class="search-box" placeholder="üîç Buscar OS..." onkeyup="filtrarTabela(\'ordensTable\', this.value)">
                    </div>
                    <div class="table-responsive">
                        <table id="ordensTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Ve√≠culo</th>
                                    <th>Data Abertura</th>
                                    <th>Status</th>
                                    <th>Total</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="ordensBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Despesas Gerais -->
            <div id="despesas" class="page hidden">
                <div class="page-header">
                    <h1>Despesas Gerais</h1>
                    <button class="btn btn-primary" onclick="openModal(\'despesaModal\')">+ Nova Despesa</button>
                </div>
                
                <div class="card">
                    <div class="table-responsive">
                        <table id="despesasTable">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Valor</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="despesasBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Compras -->
            <div id="compras" class="page hidden">
                <div class="page-header">
                    <h1>Compras</h1>
                    <button class="btn btn-primary" onclick="openModal(\'compraModal\')">+ Nova Compra</button>
                </div>
                
                <div class="card">
                    <div class="table-responsive">
                        <table id="comprasTable">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Fornecedor</th>
                                    <th>Total</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="comprasBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Financeiro -->
            <div id="financeiro" class="page hidden">
                <div class="page-header">
                    <h1>Financeiro</h1>
                </div>
                
                <div class="card">
                    <h3>Movimenta√ß√µes Recentes</h3>
                    <div class="table-responsive">
                        <table id="movimentacoesTable">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Tipo</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Valor</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="movimentacoesBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Relat√≥rios -->
            <div id="relatorios" class="page hidden">
                <div class="page-header">
                    <h1>Relat√≥rios</h1>
                </div>
                
                <div class="card">
                    <h3>Relat√≥rio Financeiro Anual</h3>
                    <form onsubmit="gerarRelatorioFinanceiro(event)">
                        <div class="form-group">
                            <label for="anoRelatorio">Ano:</label>
                            <input type="number" id="anoRelatorio" value="2023" min="2000" max="2100">
                        </div>
                        <button type="submit" class="btn btn-primary">Gerar Relat√≥rio</button>
                    </form>
                    <div id="resultadoRelatorio" class="mt-3"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Container para Modals -->
    <div id="modalContainer"></div>

    <!-- Scripts -->
    <script src="/static/app.js"></script>
    <script src="/static/calculos.js"></script>
    <script src="/static/edicao_exclusao.js"></script>
    <script src="/static/exportacao.js"></script>
    <script src="/static/filtros_busca.js"></script>
    <script src="/static/graficos.js"></script>
    <script src="/static/mascaras.js"></script>
    <script src="/static/melhorias.js"></script>
    <script src="/static/notificacoes.js"></script>
    <script src="/static/paginacao_ordenacao.js"></script>
    <script src="/static/pdf_profissional.js"></script>
    <script src="/static/relatorios_avancados.js"></script>
    <script src="/static/seguranca.js"></script>
    <script src="/static/testes_seguranca.js"></script>
    <script src="/static/validacoes.js"></script>
    <script src="/static/atualizacao_automatica.js"></script>
    <script src="/static/correcoes_completas.js"></script>
    <script src="/static/correcoes_final.js"></script>
    <script src="/static/diagnostico.js"></script>
</body>
</html>

